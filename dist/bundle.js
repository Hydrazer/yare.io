(()=>{var _=Math.pow;function s(e,t){return _(e[0]-t[0],2)+_(e[1]-t[1],2)}function c(e,t){return[e[0]-t[0],e[1]-t[1]]}function b(e,t){return[e[0]/t,e[1]/t]}function p(e,t){let i=c(e,t),u=Math.sqrt(_(i[0],2)+_(i[1],2)),o=b(i,u),r=[Math.floor(o[0]*199),Math.floor(o[1]*199)];return[r[0]+t[0],r[1]+t[1]]}function v(e,t){let i=c(e,t),u=Math.sqrt(_(i[0],2)+_(i[1],2)),o=b(i,u),r=[Math.floor(o[0]*199),Math.floor(o[1]*199)];return[r[0]+e[0],r[1]+e[1]]}function g(e,t){let i=s(spirits[e[0]].position,t),u=spirits[e[0]];for(enemy of e){let o=s(spirits[enemy].position,t);o<i&&(i=o,u=spirits[enemy])}return u}function z(e){let t=0;for(enemy of e)t+=spirits[enemy].energy;return t}{s(base.position,star_zxq.position)<s(base.position,star_a1c.position)?(memory.base_star=star_zxq,memory.enemy_star=star_a1c):(memory.base_star=star_a1c,memory.enemy_star=star_zxq);let e=[];for(x of Object.keys(spirits))e.push(spirits[x]);let t=e.filter(n=>n.hp==1).filter(n=>n.player_id!="saltAxAtlas"),i=e.filter(n=>n.hp==1).filter(n=>n.player_id=="saltAxAtlas"),u=i.length,o=outpost.control,r=p(outpost.position,star_p89.position),d=p(memory.base_star.position,base.position),A=p(memory.base_star.position,d),k=p(memory.base_star.position,A),M=p(star_p89.position,enemy_base.position),h=0;if(h==0){let n=1,f=Math.floor(u/3);outpost.control!="saltAxAtlas"&&outpost.control!=""&&(n=0,f=0);for(unit of i)if(n?(memory[unit.id]=="outpost_harvesting"&&unit.energy!=unit.energy_capacity?memory[unit.id]="outpost_harvesting":unit.energy>30?memory[unit.id]="harasser":memory[unit.id]="outpost_harvesting",n-=1):f?((memory[unit.id]=="base_defender"||memory[unit.id]=="base_charging"||memory[unit.id]=="base_harvesting")&&(memory[unit.id]="outpost_harvesting"),outpost.sight.enemies.length>0&&unit.energy==unit.energy_capacity&&outpost.energy>700||outpost.sight.enemies.length>0&&memory[unit.id]=="outpost_defender"?memory[unit.id]="outpost_defender":(memory[unit.id]=="outpost_defender"&&(memory[unit.id]="outpost_harvesting"),unit.energy>0&&outpost.energy<1e3?memory[unit.id]="outpost_charging":unit.energy==0||unit.energy<unit.energy_capacity&&outpost.energy==outpost.energy_capacity?memory[unit.id]="outpost_harvesting":unit.energy==unit.energy_capacity&&(memory[unit.id]="outpost_do_nothing")),f-=1):((memory[unit.id]=="outpost_defender"||memory[unit.id]=="outpost_charging"||memory[unit.id]=="outpost_harvesting"||memory[unit.id]=="harasser")&&(memory[unit.id]="base_harvesting"),base.sight.enemies.length>0&&unit.energy==unit.energy_capacity||base.sight.enemies.length>0&&memory[unit.id]=="base_defender"?memory[unit.id]="base_defender":(memory[unit.id]=="base_defender"&&(memory[unit.id]="base_harvesting"),unit.energy==unit.energy_capacity?memory[unit.id]="base_charging":unit.energy==0&&(memory[unit.id]="base_harvesting"))),memory[unit.id]=="harasser"){let a=unit.sight.enemies.length,y=!1;if(a>0){let q=z(unit.sight.enemies),m=g(unit.sight.enemies,unit.position),l=s(unit.position,m.position);l<=41e3?(unit.move(m.position),unit.energize(m)):q>=unit.energy/2&&l<9e4?y=!0:l>4e4&&unit.energy>m.energy?(unit.move(m.position),unit.energize(m)):l>41e3&&unit.energy<=m.energy&&(y=!0),y&&(unit.move(v(unit.position,m.position)),y=!1)}else unit.shout("Blocking Spawn!"),unit.move(M)}else if(memory[unit.id]=="outpost_defender"){unit.shout("Defend Outpost!");let a=g(outpost.sight.enemies,unit.position);if(s(unit.position,a.position)>4e4){unit.move(a.position);continue}unit.energize(a)}else if(memory[unit.id]=="outpost_charging")unit.shout("Charge Outpost!"),unit.move(r),unit.energize(outpost),outpost.energy+=unit.size;else if(memory[unit.id]=="outpost_harvesting")unit.shout("Harvest Outpost!"),unit.move(r),unit.energize(unit);else if(memory[unit.id]=="outpost_do_nothing")unit.shout("I'm Bored!"),unit.move(r);else if(memory[unit.id]=="base_defender"){unit.shout("Defend Base!");let a=g(base.sight.enemies,unit.position);if(s(unit.position,a.position)>4e4){unit.move(a.position);continue}unit.energize(a)}else if(memory[unit.id]=="base_charging")unit.shout("Charge Base!"),unit.move(d),unit.energize(base);else if(memory[unit.id]=="base_harvesting"){if(unit.shout("Harvest Base!"),s(unit.position,memory.base_star.position)>4e4){unit.move(memory.base_star.position);continue}unit.energize(unit)}}else if(h==1){ready_spirits=i.filter(n=>n.energy==n.energy_capacity).length;for(unit of i)if(unit.energy==unit.energy_capacity&&ready_spirits==u?memory[unit.id]="attacking":memory[unit.id]!="attacking"&&(memory[unit.id]="harvesting"),memory[unit.id]=="attacking"){if(unit.shout("NUKE!"),4e4<s(unit.position,enemy_base.position)){unit.move(enemy_base.position);continue}unit.energize(enemy_base)}else if(memory[unit.id]=="harvesting"){if(unit.shout("Charging!"),o=="saltAxAtlas"||o=="")unit.move(r);else if(4e4<s(unit.position,memory.base_star.position)){unit.move(memory.base_star.position);continue}if(unit.energy==unit.energy_capacity)continue;unit.energize(unit)}}else for(unit of i)unit.shout("WTF! 0 or 1!")}})();
