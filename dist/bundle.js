(()=>{var _=Math.pow;function r(e,t){return _(e[0]-t[0],2)+_(e[1]-t[1],2)}function v(e,t){return[e[0]-t[0],e[1]-t[1]]}function z(e,t){return[e[0]/t,e[1]/t]}function p(e,t){let i=v(e,t),s=Math.sqrt(_(i[0],2)+_(i[1],2)),o=z(i,s),u=[Math.floor(o[0]*199),Math.floor(o[1]*199)];return[u[0]+t[0],u[1]+t[1]]}function k(e,t){let i=v(e,t),s=Math.sqrt(_(i[0],2)+_(i[1],2)),o=z(i,s),u=[Math.floor(o[0]*199),Math.floor(o[1]*199)];return[u[0]+e[0],u[1]+e[1]]}function d(e,t){let i=r(spirits[e[0]].position,t),s=spirits[e[0]];for(enemy of e){let o=r(spirits[enemy].position,t);o<i&&(i=o,s=spirits[enemy])}return s}function A(e){let t=0;for(enemy of e)t+=spirits[enemy].energy;return t}{r(base.position,star_zxq.position)<r(base.position,star_a1c.position)?(memory.base_star=star_zxq,memory.enemy_star=star_a1c):(memory.base_star=star_a1c,memory.enemy_star=star_zxq);let e=[];for(x of Object.keys(spirits))e.push(spirits[x]);let t=e.filter(n=>n.hp==1).filter(n=>n.player_id!="saltAxAtlas"),i=e.filter(n=>n.hp==1).filter(n=>n.player_id=="saltAxAtlas"),s=i.length,o=p(outpost.position,star_p89.position),u=p(memory.base_star.position,base.position),h=p(memory.base_star.position,u),M=p(memory.base_star.position,h),q=p(star_p89.position,enemy_base.position),c=0;if(c==0){let n=1,l=Math.floor(s/3),b=s-l-1,g=0;outpost.control!="saltAxAtlas"&&outpost.control!=""&&(n=0,l=0,b=s),b>2&&(g=3);for(unit of i){if(n)memory[unit.id]=="outpost_harvesting"&&unit.energy!=unit.energy_capacity?memory[unit.id]="outpost_harvesting":unit.energy>30?memory[unit.id]="harasser":memory[unit.id]="outpost_harvesting",n-=1;else if(l)(memory[unit.id]=="base_defender"||memory[unit.id]=="base_charging"||memory[unit.id]=="base_harvesting")&&(memory[unit.id]="outpost_harvesting"),outpost.sight.enemies.length>0&&unit.energy==unit.energy_capacity&&outpost.energy>700||outpost.sight.enemies.length>0&&memory[unit.id]=="outpost_defender"?memory[unit.id]="outpost_defender":(memory[unit.id]=="outpost_defender"&&(memory[unit.id]="outpost_harvesting"),unit.energy>0&&outpost.energy<1e3?memory[unit.id]="outpost_charging":unit.energy<80||unit.energy<unit.energy_capacity&&outpost.energy==outpost.energy_capacity?memory[unit.id]="outpost_harvesting":unit.energy==unit.energy_capacity&&(memory[unit.id]="outpost_do_nothing")),l-=1;else if((memory[unit.id]=="outpost_defender"||memory[unit.id]=="outpost_charging"||memory[unit.id]=="outpost_harvesting"||memory[unit.id]=="harasser")&&(memory[unit.id]="base_harvesting"),base.sight.enemies.length>0&&unit.energy==unit.energy_capacity||base.sight.enemies.length>0&&memory[unit.id]=="base_defender")memory[unit.id]="base_defender";else{if((memory[unit.id]=="base_defender"||memory[unit.id]=="base_pipe_1"||memory[unit.id]=="base_pipe_2"||memory[unit.id]=="base_pipe_3")&&(memory[unit.id]="base_harvesting"),g)switch(g-=1,g){case 2:memory[unit.id]="base_pipe_3";break;case 1:memory[unit.id]="base_pipe_2",memory.pipe_2=unit;break;case 0:memory[unit.id]="base_pipe_1",memory.pipe_1=unit;break}unit.energy==unit.energy_capacity?memory[unit.id]="base_charging":unit.energy==0&&(memory[unit.id]="base_harvesting")}if(memory[unit.id]=="harasser"){let a=unit.sight.enemies.length,y=!1;if(a>0){let P=A(unit.sight.enemies),m=d(unit.sight.enemies,unit.position),f=r(unit.position,m.position);f<=41e3?(unit.move(m.position),unit.energize(m)):P>=unit.energy/2&&f<9e4?y=!0:f>4e4&&unit.energy>m.energy?(unit.move(m.position),unit.energize(m)):f>41e3&&unit.energy<=m.energy&&(y=!0),y&&(unit.move(k(unit.position,m.position)),y=!1)}else unit.shout("Blocking Spawn!"),unit.move(q)}else if(memory[unit.id]=="outpost_defender"){unit.shout("Defend Outpost!");let a=d(outpost.sight.enemies,unit.position);if(r(unit.position,a.position)>4e4){unit.move(a.position);continue}unit.energize(a)}else if(memory[unit.id]=="outpost_charging")unit.shout("Charge Outpost!"),unit.move(o),unit.energize(outpost),outpost.energy+=unit.size;else if(memory[unit.id]=="outpost_harvesting")unit.shout("Harvest Outpost!"),unit.move(o),unit.energize(unit);else if(memory[unit.id]=="outpost_do_nothing")unit.shout("I'm Bored!"),unit.move(o);else if(memory[unit.id]=="base_defender"){unit.shout("Defend Base!");let a=d(base.sight.enemies,unit.position);if(r(unit.position,a.position)>4e4){unit.move(a.position);continue}unit.energize(a)}else if(memory[unit.id]=="base_charging")unit.shout("Charge Base!"),unit.move(u),unit.energize(base);else if(memory[unit.id]=="base_harvesting"){if(unit.shout("Harvest Base!"),r(unit.position,memory.base_star.position)>4e4){unit.move(memory.base_star.position);continue}unit.energize(unit)}else memory[unit.id]=="base_pipe_1"?(unit.shout("PIPE!"),unit.move(u),unit.energy>80&&unit.energize(base)):memory[unit.id]=="base_pipe_2"?(unit.shout("PIPE!"),unit.move(h),unit.energy>80&&unit.energize(memory.pipe_1)):memory[unit.id]=="base_pipe_3"&&(unit.shout("PIPE!"),unit.move(M),unit.energy>80?unit.energize(memory.pipe_2):unit.energize(unit))}}else if(c==1){ready_spirits=i.filter(n=>n.energy==n.energy_capacity).length;for(unit of i)if(unit.energy==unit.energy_capacity&&ready_spirits==s?memory[unit.id]="attacking":memory[unit.id]!="attacking"&&(memory[unit.id]="harvesting"),memory[unit.id]=="attacking"){if(unit.shout("NUKE!"),4e4<r(unit.position,enemy_base.position)){unit.move(enemy_base.position);continue}unit.energize(enemy_base)}else if(memory[unit.id]=="harvesting"){if(unit.shout("Charging!"),outpost_controller=="saltAxAtlas"||outpost_controller=="")unit.move(o);else if(4e4<r(unit.position,memory.base_star.position)){unit.move(memory.base_star.position);continue}if(unit.energy==unit.energy_capacity)continue;unit.energize(unit)}}else for(unit of i)unit.shout("WTF! 0 or 1!")}})();
